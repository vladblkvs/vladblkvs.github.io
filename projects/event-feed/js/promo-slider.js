import{Drag}from"./drag-core.js";let activateSlider;const sliderSection=document.querySelector(".slider");if(sliderSection){const e=sliderSection.querySelector(".slider__list"),t=e.querySelectorAll(".slider__item"),i=e.querySelectorAll(".slider__link"),s=sliderSection.querySelectorAll(".slider__indicator"),r=sliderSection.querySelector(".slider__toggle-btn--prev"),l=sliderSection.querySelector(".slider__toggle-btn--next");let n=0;const o=8,c=t[n].querySelector(".slider__image"),d=function(){return c.offsetWidth+o};0===n&&r.setAttribute("disabled","disabled");const a=function(o){switch(e.removeEventListener("focusin",f),o!==n&&i[n].blur(),!0){case 0===o:r.setAttribute("disabled","disabled");break;case 0===n&&o>0:r.removeAttribute("disabled");break;case o===t.length-1:l.setAttribute("disabled","disabled");break;case n===t.length-1&&o<t.length-1:l.removeAttribute("disabled")}e.style.left=-d()*n+"px",e.style.transition=".2s ease-out",e.style.left=-d()*o+"px",t[n].classList.remove("slider__item--active"),s[n].classList.remove("slider__indicator--active"),n=o,t[n].classList.add("slider__item--active"),s[n].classList.add("slider__indicator--active"),setTimeout(()=>{i[n].focus(),e.style.transition="",e.addEventListener("focusin",f)},300)},u=function(){const t=function(){return parseInt(e.style.left,10)},i=n+1,s=n-1;t()<=-d()*n-90?a(i):t()>=-d()*n+90&&0!==t()?a(s):(e.style.transition="0.3s",e.style.left=-d()*n+"px",setTimeout(()=>{e.style.transition=""},400))},_=function(i){const s=new Drag({el:e,container:e,startAction:function(){s.left=d()*(t.length-1)-0},finalAction:u});i.target.closest(".slider__list")&&s.onEvent(i)},f=function(e){i.forEach((t,i)=>{e.target===t&&(a(i),n=i)})};e.addEventListener("focusin",f);const v=sliderSection.querySelector(".slider__toggles"),b=function(e){v.removeEventListener("click",b),e.target===r&&0!==n?a(n-1):e.target===l&&n!==t.length-1&&a(n+1),setTimeout(()=>{v.addEventListener("click",b)},500)};activateSlider=function(){e.addEventListener("touchstart",_,{passive:!0}),e.addEventListener("mousedown",_),v.addEventListener("click",b)}}export{activateSlider};